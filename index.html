<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Test web</title>
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
</head>

<body>
  <label for="textbox">Enter text:</label>
  <input type="text" id="textbox" />
  <button onclick="runInference()">Download</button>

  <table id="table">
    <tr>
      <th>Word</th>
      <th>Predicted class</th>
    </tr>
  </table>

  <script>
    async function runInference() {
        const text = document.getElementById('textbox').value;

        const modelPath = 'model.onnx';
        const session = await ort.InferenceSession.create(modelPath);

        const words = text.split(" ");
        const inputTensor = new ort.Tensor('string', words);

        const output = await session.run({text_input: inputTensor});

        // fill table
        var table = document.getElementById("table");
        while (table.rows.length > 1) {
          table.deleteRow(1);
        }

        for (var i = 0; i < words.length; i++) {
          var row = table.insertRow(i + 1);
          var wordCell = row.insertCell(0);
          var predictedCell = row.insertCell(1);

          wordCell.innerHTML = words[i];
          predictedCell.innerHTML = output.label.data[i];
        }
    }
  </script>
</body>

</html>